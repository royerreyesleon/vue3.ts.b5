import{U as h}from"./Users-a38d7a32.js";import{S as l}from"./sweetalert2.all-e9a3c9e0.js";import{d as g,u as C,f as w,g as k,h as y,r as x,o as i,c as d,a as e,b as U,w as B,e as E,F as p,i as A,t as c}from"./index-3334f7f5.js";const L=e("h1",{class:"text-start"},"Users",-1),S={class:"text-start"},q={class:"table-responsive"},D={class:"table table-hover"},V=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Id"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"First name"),e("th",{scope:"col"},"Last name"),e("th",{scope:"col"},"Avatar"),e("th",{scope:"col"},"Actions")])],-1),$=["src"],F=["onClick"],N=["onClick"],R=["onClick"],M=g({__name:"IndexView",setup(Y){const u=C(),m=w.useLoading(),r=k([]);y(()=>{_()});const _=async()=>{const s=m.show(),o=await h.getAllService(),n=await o.json();if(console.log("request",o),console.log("response",n),o.status!=200){s.hide(),l.fire("Error",o.error,"error");return}s.hide(),r.value=n.data},b=s=>{console.log("detailUser",s),u.push({name:"user-detail",params:{id:s}})},f=s=>{console.log("updateUser",s),u.push({name:"user-update",params:{id:s}})},v=s=>{l.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async o=>{if(o.isConfirmed){const n=m.show(),t=await h.deleteService(s);if(console.log("request",t),t.status!=204){n.hide(),l.fire("Error",t.error,"error");return}n.hide(),r.value=r.value.filter(a=>a.id!=s),l.fire("Deleted!","Your item has been deleted.","success")}})};return(s,o)=>{const n=x("RouterLink");return i(),d(p,null,[L,e("p",S,[U(n,{to:"/users/create",class:"btn btn-success"},{default:B(()=>[E(" Create ")]),_:1})]),e("div",q,[e("table",D,[V,e("tbody",null,[(i(!0),d(p,null,A(r.value,t=>(i(),d("tr",{key:t.id},[e("td",null,c(t.id),1),e("td",null,c(t.email),1),e("td",null,c(t.first_name),1),e("td",null,c(t.last_name),1),e("td",null,[e("img",{src:t.avatar,class:"rounded-circle",width:"100"},null,8,$)]),e("td",null,[e("button",{type:"button",class:"btn btn-sm btn-secondary mt-1 me-1",onClick:a=>b(t.id)}," Detail ",8,F),e("button",{type:"button",class:"btn btn-sm btn-primary mt-1 me-1",onClick:a=>f(t.id)}," Edit ",8,N),e("button",{type:"button",class:"btn btn-sm btn-danger mt-1 me-1",onClick:a=>v(t.id)}," Delete ",8,R)])]))),128))])])])],64)}}});export{M as default};
