import{u as k,r as f,m as _}from"./index-0f55ad4f.js";import{S as m}from"./sweetalert2.all-e9a3c9e0.js";import{u as C,f as U,j as L,h as N,k as S,r as V,o as i,c as l,a as s,b as q,w as R,l as p,v as h,n as $,F as u,i as g,e as B,t as j}from"./index-3334f7f5.js";import{U as y}from"./Users-a38d7a32.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const D={setup(){const d=C(),t=U.useLoading(),r=L({name:"",job:""});N(()=>{e()});const e=async()=>{const o=t.show(),a=await y.getOneService(Number(d.currentRoute.value.params.id)),n=await a.json();if(console.log("request",a),console.log("response",n),a.status!=200){o.hide(),m.fire("Error","Not found","error");return}o.hide(),r.name=n.data.first_name,r.job=n.data.last_name},v=S(()=>({name:{required:f,minLength:_(2)},job:{required:f,minLength:_(2)}}));return{v$:k(v,r),submitCreate:async o=>{o.preventDefault();const a=t.show();console.log("state",r);const n={name:r.name,job:r.job},c=await y.updateService(Number(d.currentRoute.value.params.id),n),x=await c.json();if(console.log("request",c),console.log("response",x),c.status!=200){a.hide(),m.fire("Error",c.error,"error");return}a.hide(),m.fire("Updated","Correctly updated","success"),d.push({path:"/users/index"})}}}},F=s("h1",{class:"text-start"},"User Update",-1),M={class:"text-start"},O={class:"row d-flex justify-content-center"},T={class:"col-md-8"},z={class:"card"},J={class:"card-body"},A={class:"mb-3"},G=s("label",{for:"name",class:"form-label"},"Name",-1),H={class:"mb-3"},I=s("label",{for:"job",class:"form-label"},"Job",-1),K=["disabled"];function P(d,t,r,e,v,w){const b=V("RouterLink");return i(),l(u,null,[F,s("p",M,[q(b,{to:"/users/index",class:"btn btn-secondary"},{default:R(()=>[B(" Back ")]),_:1})]),s("div",O,[s("div",T,[s("div",z,[s("div",J,[s("form",{onSubmit:t[2]||(t[2]=(...o)=>e.submitCreate&&e.submitCreate(...o))},[s("div",A,[G,p(s("input",{type:"text",class:$({"form-control":!e.v$.name.$dirty,"form-control is-invalid":e.v$.name.$errors.length,"form-control is-valid":!e.v$.name.$errors.length&&e.v$.name.$dirty}),id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>e.v$.name.$model=o)},null,2),[[h,e.v$.name.$model]]),(i(!0),l(u,null,g(e.v$.name.$errors,o=>(i(),l("div",{class:"invalid-feedback",key:o.$uid},j(o.$message),1))),128))]),s("div",H,[I,p(s("input",{type:"job",class:$({"form-control":!e.v$.job.$dirty,"form-control is-invalid":e.v$.job.$errors.length,"form-control is-valid":!e.v$.job.$errors.length&&e.v$.job.$dirty}),id:"job",autocomplete:"on","onUpdate:modelValue":t[1]||(t[1]=o=>e.v$.job.$model=o)},null,2),[[h,e.v$.job.$model]]),(i(!0),l(u,null,g(e.v$.job.$errors,o=>(i(),l("div",{class:"invalid-feedback",key:o.$uid},j(o.$message),1))),128))]),s("button",{type:"submit",class:"btn btn-primary w-100 py-2",disabled:e.v$.$invalid}," Save ",8,K)],32)])])])])],64)}const ee=E(D,[["render",P]]);export{ee as default};
